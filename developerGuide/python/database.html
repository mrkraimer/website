<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
  <title>database</title>
  <link rel="stylesheet" type="text/css"
  href="../../css/base.css" />
  <link rel="stylesheet" type="text/css"
  href="../../css/epicsv4.css" />
  <style type="text/css">
  /*<![CDATA[*/
     .about { margin-left: 3em; margin-right: 3em; font-size: .83em}
     table { margin-left: auto; margin-right: auto }
     .diagram { text-align: center; margin: 2.5em 0 }
     span.opt { color: grey }
     span.nterm { font-style:italic }
     span.term { font-family:courier }
     span.user { font-family:courier }
     span.user:before { content:"<" }
     span.user:after { content:">" }
     .nonnorm { font-style:italic }
     p.ed { color: #AA0000 }
     span.ed { color: #AA0000 }
     p.ed.priv { display: inline; }
     span.ed.priv { display: inline; }
  /*]]>*/</style>
  <!-- Script that generates the Table of Contents -->
  <script type="text/javascript"
  src="../../css/tocgen.js">
  </script>
</head>
<body>

<div class="head">
<h1>database</h1>

<h2 class="nocount">2020.04.29</h2>
<dl>
  <dt>Author:</dt>
    <dd>Marty Kraimer</dd>
  <dt>WARNING</dt>
     <dd>
      This is a work in progress.
     </dd>
</dl>

<p>This product is available via an <a
href="../../LICENSE">open source license
</a></p>

</div>


<div id="toc">

<h2 class="nocount" style="page-break-before: always">Table of Contents</h2>
</div>
<div id="contents" class="contents">


<h2>Introduction</h2>
<p>This document describes the the IOC database used by <b>mandelbrot</b> and <b>plot2dcurves</b>
</p>
<p>See
<a href="index.html">index</a>
For installation instructions.
</p>


<h2>database</h2>
<h3>Overview</h3>
<p>
<b>testPython/database</b>
creates an IOC database that can have DBRecords for any of the record types
provided  by EPICS base.
In addition it has PVRecords required by maldebrot and plot2dcurves.
</p>
<p>
When the database is started as follows:
</p>
<pre>
mrk> pwd
/home/epics7/testPython/database/iocBoot/mandelbrotDatabase
mrk> ../../bin/linux-x86_64/mandelbrotDatabase st.cmd 
</pre>
<p>
It has the following records:
</p>
<pre>
epics> dbl
TPYcounter01
epics> pvdbl
TPYaddRecord
TPYmandelbrotRecord
TPYremoveRecord
TPYtraceRecord
epics> 
</pre>
<p>
<b>testPython/database</b>
is designed for two purposes:
</p>
<dl>
   <dt>testPython</dt>
      <dd>
       The record TPYmandelbrotRecord is the record that creates maldebrot images.
       <br />
       <br />
       The record TPYaddRecord is used by plot2dcurves to create record named
       <b>TPY_2dcurve</b>
      </dd>
   <dt>example</dt>
      <dd>
       This can be a model for creating other IOC databases that has a combination
       of DBRecords and PVRecords.
       <br />
       To use it for another application just recursively copy database to
       another location and make necessary modifications.
      </dd>
</dl>

<h3>Brief description of testPython/database</h3>
<p>This section describes all the files in database.
It describes them from the point of view of someone who creates a copy
in order to create another IOC database.
</p>

<h4>database</h4>
<dl>
   <dt>RELEASE.local</dt>
      <dd>
      This is the only file in this directory that needs modification.
      <br />
      The only thing that is normaally changed is
       <b>EPICS7_DIR=/home/epics7/base-7.0.3.1</b>
       It must be changed to access your EPICS7 system. 
      </dd>
   <dt>CONFIG_SITE.local</dt>
      <dd>
      This should not need any changes.
      </dd>
   <dt>Makefile</dt>
      <dd>
       This should not need any changes.
      </dd>
   <dt>configure/*</dt>
      <dd>
       None of these files need any changes.
      </dd>
</dl>

<h4>database/src</h4>
<dl>
   <dt>Makefile</dt>
      <dd>
       This needs changes.
      </dd>
   <dt>pv/mandelbrotRecord.h</dt>
      <dd>
       This and the following C++ file implement code
        that creates a maldebrot image.
      It can be used as a model of how to create your own PVRecords.
      </dd>
   <dt>mandelbrotRecord.cpp</dt>
      <dd>
       This is the implementation.
      </dd>
   <dt>mandelbrotRecordRegister.cpp</dt>
      <dd>
      This implements the code that is called via the iocshell
      to create mandelbrot records.
      </dd>
   <dt>mandelbrotRecordRegister.dbd</dt>
      <dd>
      This is the definition that makes the iocshell aware of mandelbrotRecordRegister.
      </dd>
</dl>

<h4>database/dbSrc</h4>
<dl>
   <dt>Makefile</dt>
      <dd>
      </dd>
   <dt>dbCounter.db</dt>
      <dd>
      </dd>
</dl>
<h4>database/iocSrc</h4>
<p>
This is where code for an IOC database is created.
It is the standard way to build an IOC database.
</p>

<dl>
   <dt>MakeFile</dt>
      <dd>
       This needs modification for other databases.
      </dd>
   <dt>mandelbrotDatabaseInclude.dbd</dt>
      <dd>
      Other than the definition for <b>mandelbrotRecordRegister.dbd</b>
      this does not need modification.
      </dd>
   <dt>mandelbrotDatabaseMain.cpp</dt>
      <dd>
      This does not need an change except the name itself.
      </dd>
</dl>
<h4>database/iocBoot</h4>
<dl>
   <dt>Makefile</dt>
      <dd>
      Change this to add definitions for each subdirectory.
      </dd>
</dl>
<h4>database/iocBoot/mandelbrotDatabase</h4>
<dl>
   <dt>Makefile</dt>
      <dd>
       Should not need change.
      </dd>
   <dt>st.cmd</dt>
      <dd>
       This needs changes.
      </dd>
</dl>
</div>
</body>
</html>
